# i3 Keybind
set $cmd Mod4
set $alt Shift
set $sys Control
set $exit Escape
set $terminal terminator
set $browser vivaldi-stable

# System commands
set $system_mode "System(r|w|e|l|Win+s|Win+h|Win+r|Win+p)"
mode $system_mode {
	bindsym r restart, mode "default"
	bindsym w reload, mode "default"
	bindsym e i3-msg exit, mode "default"
	bindsym $cmd+s exec --no-startup-id systemctl suspend, mode "default"
	bindsym $cmd+h exec --no-startup-id systemctl hybrid-sleep, mode "default"
	bindsym $cmd+r exec --no-startup-id systemctl reboot, mode "default"
	bindsym $cmd+p exec --no-startup-id systemctl poweroff -i, mode "default"
	bindsym l exec --no-startup-id "i3lock -c 000000", mode "default"
	bindsym $exit mode "default"
}
bindsym $cmd+$exit mode $system_mode

set $focus_mode "Focus (wasd)"
mode $focus_mode {
	bindsym w focus up
	bindsym s focus down
	bindsym a focus left
	bindsym d focus right
	bindsym Up focus up
	bindsym Down focus down
	bindsym Left focus left
	bindsym Right focus right
	bindsym p focus parent
	bindsym c focus child
	bindsym $exit mode "default"
}

bindsym $cmd+$alt+f mode $focus_mode

mode "layout" {
	bindsym $cmd+s layout stacking, mode "default"
	bindsym $cmd+t layout tabbed, mode "default"
	bindsym $cmd+v layout splitv, mode "default"
	bindsym $cmd+h layout splith, mode "default"
	bindsym $cmd+d layout default, mode "default"
	bindsym $cmd+f floating toggle, mode "default"
	bindsym $cmd+Shift+s layout stacking
	bindsym $cmd+Shift+t layout tabbed
	bindsym $cmd+Shift+v layout splitv
	bindsym $cmd+Shift+h layout splith
	bindsym $cmd+Shift+d layout default
	bindsym $cmd+Shift+f floating toggle
	bindsym $exit mode "default"
}
bindsym $cmd+$alt+l mode "layout"

floating_modifier $alt

# Audio Commands
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +10% && $refresh_i3status
bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -10% && $refresh_i3status
bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle && $refresh_i3status
bindsym XF86AudioMicMute exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ toggle && $refresh_i3status

# Application management
bindsym $cmd+q kill
bindsym $cmd+Return exec $terminal
bindsym $cmd+d exec "rofi -modi drun,run -show drun"
bindsym $cmd+b exec --no-startup-id $browser
bindsym $cmd+h exec --no-startup-id $terminal -e htop
bindsym $cmd+p exec --no-startup-id $terminal -e python

# Screenshot
bindsym --release $cmd+s exec --no-startup-id import /tmp/latest-screenshot.png

# Resizing Windows
mode "resize" {
	bindsym a resize shrink width 10 px or 10 ppt
	bindsym s resize shrink height 10 px or 10 ppt
	bindsym d resize grow width 10 px or 10 ppt
	bindsym w resize grow height 10 px or 10 ppt
	
	bindsym Left resize shrink width 10 px or 10 ppt
	bindsym Down resize shrink height 10 px or 10 ppt
	bindsym Right resize grow width 10px or 10 ppt
	bindsym Up resize grow height 10px or 10 ppt

	bindsym $exit mode "default"
}
bindsym $cmd+$alt+r mode "resize"

# Workspace management
set $ws0 "0"
set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8"
set $ws9 "9"

bindsym $cmd+0 workspace number $ws0
bindsym $cmd+1 workspace number $ws1
bindsym $cmd+2 workspace number $ws2
bindsym $cmd+3 workspace number $ws3
bindsym $cmd+4 workspace number $ws4
bindsym $cmd+5 workspace number $ws5
bindsym $cmd+6 workspace number $ws6
bindsym $cmd+7 workspace number $ws7
bindsym $cmd+8 workspace number $ws8
bindsym $cmd+9 workspace number $ws9

# Move focused app
set $move_app "Move Application"
mode $move_app {
	# Move app to new workspace
	bindsym 0 move container to workspace number $ws0
	bindsym 1 move container to workspace number $ws1
	bindsym 2 move container to workspace number $ws2
	bindsym 3 move container to workspace number $ws3
	bindsym 4 move container to workspace number $ws4
	bindsym 5 move container to workspace number $ws5
	bindsym 6 move container to workspace number $ws6
	bindsym 7 move container to workspace number $ws7
	bindsym 8 move container to workspace number $ws8
	bindsym 9 move container to workspace number $ws9	
	# Move app physically
	bindsym w move up
	bindsym s move down
	bindsym a move left
	bindsym d move right
	bindsym Up move up
	bindsym Down move down
	bindsym Left move left
	bindsym Right move right
	bindsym Escape mode "default"
}

bindsym $cmd+m mode $move_app

set $move_workspace "Move Workspace"
mode $move_workspace {
	bindsym 0 move workspace to output current
	bindsym 1 move workspace to output current
	bindsym 2 move workspace to output current
	bindsym 3 move workspace to output current
	bindsym 4 move workspace to output current
	bindsym 5 move workspace to output current
	bindsym 6 move workspace to output current
	bindsym 7 move workspace to output current
	bindsym 8 move workspace to output current
	bindsym 9 move workspace to output current
	bindsym Escape mode "default"
}
bindsym $cmd+$alt+m mode $move_workspace
